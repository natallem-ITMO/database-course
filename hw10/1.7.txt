1.7 FlightStat
start transaction read only isolation level read committed;
-- недостаточность read uncommitted:
-- Запрос является статистическим, однако в отличие от предыдущего,
-- проходится по меньшему объему данных, и с учетом этого погрешность
-- в вычислениях статистики может сильнее ударить по пользователю
-- (если показать меньшее количество свободных билетов, которые кто-то
-- в процессе другой (в будущем откаченной) транзакции бронирует параллельно,
-- то пользователь может отказаться от покупки), а так же из-за меньшего
-- объема просматриваемых данных, блокировка не так сильно ударит по
-- базе в целом)
-- Т.к. мы возвращаем различные значения по смыслу (не смотря на то, что
-- обращаемся к некоторым таблицам несколько раз в транзакции), для каждого
-- возвращаемого значения мы используем один запрос, а значит неповторяемое
-- чтение и фантомные записи не беспокоят, ведь каждое возвращенное значение
-- можно воспринимать как отдельный срез состояния системы => большее сильные
-- уровни изоляции, чем read committed не имеют смысла.