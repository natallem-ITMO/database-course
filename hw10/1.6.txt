1.6 FlightsStatistics
start transaction read only isolation level read uncommitted;
-- Запрос является статистическим и поэтому точность не так важна, как
-- быстрота обработки (данный запрос проходится по данным всех полетов,
-- поэтому добавление блокировок может существенно замедлить работу
-- всех параллельных операций над данными), поэтому можем пожертвовать
-- корректностью возвращаемого значения и допустить погрешности в рассчетах,
-- однако тогда мы не будем замедлять работу базы данных в целом.
-- Т.к. в данной ситуации никаких важных данных пользователя мы не отдаем,
-- да и вообще можем отдать не совсем корректную статистику по полетам (жертва
-- производительности), то и поддержание особой точности в проверке пароля
-- пользователя кажется избыточной, т.к. ситуации с тем, что мы поменяли пароль в
-- базе данных, и одновременно с этим дали неправильный пароль в фукнцию, а затем
-- откатили изменение пароля, кажется маловероятной. Однако, если же нужна
-- бОльшая надежность, необходимо исопльзовать read committed, чтобы гарантированно
-- проверять пользователя.